<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.backoven.catdogshelter.domain.userrating.query.mapper.RatingMapper">
    <resultMap id = "ratingResultMap" type = "com.backoven.catdogshelter.domain.userrating.query.dto.ratingDTO">
        <id property = "id" column = "id"/>
        <result property = "name" column = "name"/>
        <result property = "standard" column = "standard"/>
    </resultMap>

    <resultMap id = "userRatingResultMap" type = "com.backoven.catdogshelter.domain.userrating.query.dto.UserRatingDTO">
        <id property = "id" column = "id"/>
        <result property = "name" column = "name"/>
        <result property = "time" column = "cumulative_volunteer_time"/>
        <result property = "standard" column = "standard"/>
    </resultMap>

    <select id = "selectRating" resultMap = "ratingResultMap" >
        SELECT
               id
             , name
             , standard
          FROM rating
    </select>

    <select id = "selectUserRating" parameterType="_int" resultMap = "userRatingResultMap" >
        SELECT
               r.id
             , r.name
             , r.standard
          FROM rating AS r
          JOIN user AS u ON (r.id = u.rating_id)
         WHERE u.user_id = #{userId}
    </select>
</mapper>